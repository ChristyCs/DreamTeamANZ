<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>D3 Project</title>
        <!--<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>-->
        <script src="d3.js"></script>
        <script type="text/javascript" src="data.js"></script>
    </head>
    <body style = "margin-top: 0px; margin-left: 0px; margin-bottom: 0px">
        <script type="text/javascript">

           var file = new data();
           setupData();
           function setupData(){
           file.set2008(readCSV("ANZChampionshipResults/2008-Table1.csv"));
           file.data2009 = readCSV("ANZChampionshipResults/2009-Table1.csv");
           file.data2010 = readCSV("ANZChampionshipResults/2010-Table1.csv");
           file.data2011 = readCSV("ANZChampionshipResults/2011-Table1.csv");
           file.data2012 = readCSV("ANZChampionshipResults/2012-Table1.csv");
           file.data2013 = readCSV("ANZChampionshipResults/2013-Table1.csv");
         }
         function readCSV(fname){
                d3.csv(fname, function(d) {
                var season = file.readData(d);
                file.allData.push(season);
                return season;
            }, function(error, rows) {
                return rows;
                });
            }




           testData(file);
            function testData(file){
                console.log(file);
            }


            //Round,Date,Time,Home Team,Score,Away Team,Venue
            // var dataFile2008 = readCSV("ANZChampionshipResults/2008-Table1.csv");
            // var dataFile2009 = readCSV("ANZChampionshipResults/2009-Table1.csv");
            // var dataFile2010 = readCSV("ANZChampionshipResults/2010-Table1.csv");
            // var dataFile2011 = readCSV("ANZChampionshipResults/2011-Table1.csv");
            // var dataFile2012 = readCSV("ANZChampionshipResults/2012-Table1.csv");
            // var dataFile2013 = readCSV("ANZChampionshipResults/2013-Table1.csv");


            // function readCSV(fname){
            //     d3.csv(fname, function(d) {
            //     return readData(d);
            // }, function(error, rows) {
            //     return rows;
            //     });
            // }

            // function readData(d){
            //     return {
            //         round: +d.Round,
            //         date: d.Date,
            //         time: d.Time,
            //         hometeam: d['Home Team'],
            //         score: d.Score,
            //         awayteam: d['Away Team'],
            //         venue: d.Venue
            //      };
            // }

            var width = window.innerWidth;
            var height = window.innerHeight;


            var svg = d3.select("body")
                .append("svg")
                .attr("width",width)
                .attr("height",height);

            setupPage();

            function setupPage(){
                svg.append("rect")
                    .attr("x",0)
                    .attr("y",0)
                    .attr("width",width)
                    .attr("height", height*0.1)
                    .attr("fill",("rgb(238,201,0)"));

                svg.append("rect")
                    .attr("x",0)
                    .attr("y",height*0.1)
                    .attr("width",width)
                    .attr("height", height*0.05)
                    .attr("fill",("rgb(151,255,255)"));

            // svg.append("image")
            //     .attr("xlink:href","greyscale.jpg")
            //     .attr("overflow","hidden")
            //     .attr("x",0)
            //     .attr("y",0)
            //     .attr("width",width)
            //     .attr("height",height);

                svg.append("rect")
                    .attr("x",0)
                    .attr("y",height*0.15)
                    .attr("width",width)
                    .attr("height",height-(height*0.15))
                    .attr("fill",("rgb(99,99,99)"));
            }



            var buttWid = width * 0.1;
            var buttHgt = height * 0.1;
            var buttY = height *0.2;
            addButton(width - buttWid, height *0.2, buttWid, buttHgt, "rgb(255,255,192)", "Homepage");
            addButton(width - buttWid, buttY + (buttHgt*1.5), buttWid, buttHgt, "rgb(238,238,128)", "Teams");

            addButton(width - buttWid, buttY + (buttHgt*3), buttWid, buttHgt, "rgb(205,205,64)", "Standings");
            addButton(width - buttWid, buttY + (buttHgt*4.5), buttWid, buttHgt, "rgb(171,171,32)", "Venues");
            addButton(width - buttWid, buttY + (buttHgt*6), buttWid, buttHgt, "rgb(139,139,0)", "Calendar");


            function addButton(x, y, width, height, colour, buttName){

                svg.append("rect")
                    .attr("id", buttName)
                    .attr("x", x)
                    .attr("y", y)
                    .attr("width", width)
                    .attr("height", height)
                    .attr("fill", colour)
                    .on("mouseover", function(){
                        d3.select(this)
                            .transition()
                            //.attr("fill", "green")
                            .attr("width", buttWid * 1.3)
                            .attr("x", x - buttWid * 0.3)
                            .attr("y", y - (0.15 * (buttHgt * 1.4)))
                            .attr("height", buttHgt * 1.4)
                     })
                    .on("mouseout", function(d){
                         d3.select(this)
                            .transition()
                            //.style("fill", colour)
                            .attr("width", buttWid)
                            .attr("x", x)
                            .attr("height", height)
                            .attr("y", y)
                    })
                    .on("mousedown", function(){
                        window.open("Homepage.html", "_self")
                    })

                    appendText(buttName, x, y + (0.25*buttWid), 15);

            }

            /**
              appends text to the dialog box created in the svg
              given the text and the x and y vals in which the
              text will be placed
            */
            function appendText(text, xVal, yVal, fontsize){
              d3.select("svg")
                .append("text")
                .transition()
                  .attr("id", "button")
                  .text(text)
                  .attr("x", xVal)
                  .attr("y", yVal)
                  .attr("font-size", fontsize)
                  .attr("font-family", "georgia")
                  .attr("fill", "black")
            }

        </script>
    </body>
</html>
